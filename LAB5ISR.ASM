	.ORIG X1700

	
	

	ST	R0, SAVER0 ;saving registers
	ST 	R1, SAVER1
	ST	R2, SAVER2
	ST	R3, SAVER3
	ST 	R7, SAVER7


	LDI	R0, KBDR ;finding what key was typed
	

	ADD	R1, R0 , #0	
	LD	R2, SPECIALBOUND1	
	ADD	R1, R1, R2
	BRNZ	SPECIAL1
	
	ADD	R1, R0 , #0
	LD	R2, NUMBERBOUND
	ADD	R1, R1, R2
	BRNZ	NUMBER1

	ADD	R1, R0 , #0
	LD	R2, SPECIALBOUND2
	ADD	R1, R1, R2
	BRNZ	SPECIAL1
	
	ADD	R1, R0 , #0
	LD	R2, UPPERBOUND
	ADD	R1, R1, R2
	BRNZ	UPPERCASE1
	
	ADD	R1, R0 , #0
	LD	R2, SPECIALBOUND3
	ADD	R1, R1, R2
	BRNZ	SPECIAL1

	ADD	R1, R0 , #0
	LD	R2, LOWERBOUND
	ADD	R1, R1, R2
	BRNZ	LOWERCASE1

	ADD	R1, R0 , #0
	LD	R2, SPECIALBOUND4
	ADD	R1, R1, R2
	BRNZ	SPECIAL1

	

SPECIAL1	LEA	R0, SPECIALCHARACTER
SPECIAL2	LDR	R1, R0, #0
		BRZ	RETURN
		JSR	POLL
		ADD	R0, R0, #1
		BR 	SPECIAL2


UPPERCASE1	LEA	R0, UCCHARACTER
UPPERCASE2	LDR	R1, R0, #0
		BRZ	RETURN
		JSR	POLL
		ADD	R0, R0, #1
		BR 	UPPERCASE2

LOWERCASE1	LEA	R0, LCCHARACTER
LOWERCASE2	LDR	R1, R0, #0
		BRZ	RETURN
		JSR	POLL
		ADD	R0, R0, #1
		BR 	LOWERCASE2

NUMBER1		LEA	R0, NUMBER
NUMBER2		LDR	R1, R0, #0
		BRZ	RETURN
		JSR	POLL
		ADD	R0, R0, #1
		BR 	NUMBER2


POLL		LDI	R3, DSR
		BRZP	POLL
		STI	R1, DDR
		RET
		
		LD	R0, SAVER0
		LD	R1, SAVER1
		LD	R2, SAVER2
		LD	R3, SAVER3
		LD 	R7, SAVER7

RETURN		RTI

SPECIALBOUND1	.FILL X-002F
NUMBERBOUND	.FILL X-0039
SPECIALBOUND2	.FILL X-0040
UPPERBOUND	.FILL X-005A
SPECIALBOUND3	.FILL X-0060
LOWERBOUND	.FILL X-007A
SPECIALBOUND4	.FILL X-007F
SAVER0		.BLKW 1
SAVER1		.BLKW 1
SAVER7		.BLKW 1
SAVER2		.BLKW 1
SAVER3		.BLKW 1
DSR		.FILL XFE04
DDR		.FILL XFE06
SPECIALCHARACTER .STRINGZ "KEYBOARD INT SPECIAL CHARACTER \n"
UCCHARACTER	.STRINGZ "KEYBOARD INT UPPERCASE \n"
LCCHARACTER	.STRINGZ "KEYBOARD INT LOWERCASE \n"
NUMBER		.STRINGZ "KEYBOARD INT NUMBER \n"
ASCIIENTER	.FILL X0A
KBDR		.FILL XFE02
		.END